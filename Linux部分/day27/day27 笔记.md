# day27 ç¬”è®°

### Ep01 å†™åœ¨å‰é¢

- vim

  > - æ™®é€šæ¨¡å¼
  >   - æ™®é€šæ¨¡å¼åˆ°ç¼–è¾‘æ¨¡å¼
  >     - a/A/s/S/i/I	
  >     - æŒ‰ä¸‹Iå…‰æ ‡ç§»å‘è¡Œé¦–ï¼ŒAç§»å‘è¡Œå°¾
  >     - såˆ é™¤ä¸€ä¸ªå¹¶è¿›å…¥ç¼–è¾‘æ¨¡å¼ï¼ŒSåˆ é™¤ä¸€è¡Œå¹¶è¿›åŽ»
  >   - æ™®é€šæ¨¡å¼åˆ°å¯è§†æ¨¡å¼
  >     - vï¼šæ¨ªé€‰
  >     - Ctrl+vï¼šç«–é€‰
  > - ç¼–è¾‘æ¨¡å¼
  >   - åŒæ­£å¸¸
  > - å¯è§†æ¨¡å¼
  >   - å¦‚ä½•æ‰¹é‡æ³¨é‡Šä»£ç ï¼š
  >     - è¿›åŽ»ç«–é€‰å¯è§†æ¨¡å¼
  >     - é€‰æ‹©åˆé€‚çš„è¡Œ
  >     - Iè¡¨ç¤ºå‘å‰æ’å…¥
  >     - è¾“å…¥//+ESC
  > - å…‰æ ‡ç§»åŠ¨
  >   - ä¸Šä¸‹å·¦å³ï¼šhjkl
  >   - è¡Œé¦–è¡Œå°¾ï¼š^/$
  >   - æ–‡ä»¶å¤´/æ–‡ä»¶å°¾ï¼šgg/G
  >   - ä¸‹/ä¸Šä¸€ä¸ªå•è¯ï¼šw/b
  >   - ç¿»é¡µï¼šCtrl+b/f/u/d
  >   - ç§»åŠ¨è¡Œï¼š:[è¡Œå·]/[è¡Œå·]G
  >   - å‘å‰/åŽnè¡Œï¼š[è¡Œå·]-/+
  > - åˆ é™¤å’Œå¤åˆ¶
  >   - åˆ é™¤å­—ç¬¦ï¼šx
  >   - åˆ é™¤ä¸€è¡Œ/nè¡Œï¼šdd/[n]dd
  >   - åˆ é™¤åˆ°è¡Œå°¾ï¼šD/d$
  >   - åˆ é™¤åˆ°è¡Œé¦–ï¼šd^
  >   - åˆ é™¤ä¸€ä¸ª/nä¸ªå•è¯ï¼šdw/dnw
  >   - ç²˜è´´ï¼šp
  >   - æ’¤é”€ï¼šu
  >   - åƒµæ­»å’Œè§£é™¤ï¼šCtrl+s /Ctrl+q
  >   - æ‹·è´ä¸€è¡Œ/nè¡Œï¼šyy/nyy
  > - åˆ é™¤ç‰¹å®šå†…å®¹
  >   - åˆ é™¤æ‹¬å·å†…ï¼šdt)
  >   - åˆ é™¤>å†…ï¼šdt>
  >   - åˆ é™¤}å†…ï¼šdt}
  > - æŸ¥æ‰¾
  >   - /[str]ï¼šstrå¯ä»¥æ˜¯æ­£åˆ™è¡¨è¾¾å¼
  > - æ›¿æ¢i
  >   - æ›¿æ¢ç¬¬ä¸€ä¸ªå­—ç¬¦ä¸²ï¼š`:s/[stc]/[dst]` 
  >   - æ›¿æ¢å½“è¡Œçš„æ‰€æœ‰åŒ¹é…å­—ç¬¦ä¸²ï¼š`:s/[stc]/[dst]/g`
  >   -  æ›¿æ¢å½“è¡Œçš„æ‰€æœ‰åŒ¹é…å­—ç¬¦ä¸²ä¸åŒºåˆ†å¤§å°å†™ï¼š`:s/[stc]/[dst]/ig`
  >   - æ›¿æ¢ç¬¬xï¼Œyè¡Œï¼š`:[x,y] s/[stc]/[dst]/ig`
  >   - æ›¿æ¢å…¨éƒ¨ï¼š`:%s/[stc]/[dst]/g`
  > - ä¿å­˜å¹¶é€€å‡º
  >   - :wï¼šä¿å­˜
  >   - :wqï¼šå’Œ:xç­‰ä»·
  >   - ZZï¼šä¿å­˜å¹¶é€€å‡º
  >   - :q!ï¼šæ”¾å¼ƒä¿®æ”¹é€€å‡º
  > - æŸ¥çœ‹åå…­è¿›åˆ¶
  >   - :%!xdd
  >   - :%!xdd -r
  > - å¤šçª—å£
  >   - new
  >   - vnew
  >   - split
  >   - vsplit
  >   - sp
  >   - vsp
  >   - åˆ‡æ¢ï¼šctrl+w+w
  > - å¤šæ ‡ç­¾
  >   - tabnew
  >   - åˆ‡æ¢ï¼šgt/gT
  > - ä»£ç å¯¹é½ï¼š=
  >   - åœ¨å¯è§†æ¨¡å¼ä¸‹é€‰æ‹©éœ€è¦å¯¹é½çš„ä»£ç ï¼ŒæŒ‰=
  >   - gg=G
  > - å¤–éƒ¨å‘½ä»¤
  >   - æ‰¹é‡æ›¿æ¢ï¼šsed
  >     - æ˜¾ç¤ºæ›¿æ¢ç»“æžœï¼š`sed â€œs/[src]/[dst]/gâ€`ï¼Œå¯ç”¨é‡å®šå‘åˆ°å¦ä¸€ä¸ªæ–‡ä»¶ä¸­
  >     - ç¡®è®¤æ›¿æ¢ï¼š`sed -i â€œs/[src]/[dst]/gâ€`
  >   - æ¯”è¾ƒå·®å¼‚ï¼švimdiffï¼ˆç”¨Ctrl+w+wåˆ‡æ¢çª—å£ï¼‰
  >   - ç›´æŽ¥è·³è½¬åˆ°ç¬¬å‡ è¡Œï¼švim [è¡Œå·]
  >   - ç›´æŽ¥è·³è½¬åˆ°æŸä¸ªä½ç½®ï¼švim [src]
  > - è®­ç»ƒç¨‹åºï¼švimtutor
  > - é…ç½®æ–‡ä»¶ï¼š~/.vimsrc

- ç¼–è¯‘

  > - ç¼–è¯‘æµç¨‹
  >   - é¢„å¤„ç†ï¼šgcc -E
  >   - ç¼–è¯‘ï¼šgcc -S
  >   - æ±‡ç¼–ï¼š$as
  >   - é“¾æŽ¥ï¼š$ld
  > - ç›´æŽ¥ç¼–è¯‘æˆå¯æ‰§è¡Œæ–‡ä»¶ï¼šgcc -c xxx.c -o [æ–‡ä»¶å]
  > - å…¶ä»–é€‰é¡¹
  >   - -iï¼šæ·»åŠ å¤´æ–‡ä»¶çš„ç›®å½•
  >   - -Dï¼šåŠ å®å®šä¹‰
  >   - -Wallï¼šå¼€å¯è­¦å‘Š
  >   - -O[123]ï¼šæ±‡ç¼–ä»£ç ä¼˜åŒ–
  >   - -oï¼š
  > - åº“ï¼š
  >   - é™æ€åº“ï¼šåŠ è½½è¿›ç¨‹åº
  >     - ç”Ÿæˆç›®æ ‡æ–‡ä»¶
  >     - æ‰“åŒ…
  >       - $ar crsv lib[æ–‡ä»¶å/å‡½æ•°å].a [æ–‡ä»¶å/å‡½æ•°å].o
  >     - æ‹·è´åˆ°libç›®å½•
  >     - é“¾æŽ¥
  >       - -l[æ–‡ä»¶å/å‡½æ•°å]
  >   - åŠ¨æ€åº“ï¼šä»…é“¾æŽ¥
  >     - ç”Ÿæˆç›®æ ‡æ–‡ä»¶ï¼š-fpic ç”Ÿæˆä½ç½®æ— å…³çš„ä»£ç 
  >     - æ‰“åŒ…ï¼šgcc -shared -o lib[func].so [func].o
  >   - æŸ¥çœ‹ç›®æ ‡æ–‡ä»¶å®šä½ä¿¡æ¯ï¼š$nm
  >   - æŸ¥çœ‹åŠ¨æ€åº“ä¾èµ–æƒ…å†µï¼š$ldd
  >   - ç”Ÿæˆè½¯è¿žæŽ¥ï¼ˆåŠ¨æ€åº“ä½¿ç”¨å’Œå‡çº§ï¼‰ï¼šä¸éœ€è¦é‡æ–°ç¼–è¯‘
  >     - å‡çº§æ—¶ä¿®æ”¹åº“æ–‡ä»¶å’Œè½¯é“¾æŽ¥çš„æŒ‡å‘

- gdb

  > - ç¼–è¯‘æ—¶ -g
  > - è¿›å…¥è°ƒè¯•ç•Œé¢ï¼šgdb å¯æ‰§è¡Œç¨‹åº
  >   - æ˜¾ç¤ºä»£ç ï¼ši
  >   - å‘½ä»¤è¡Œå‚æ•°
  >     - show args
  >     - set args
  >   - æ–­ç‚¹
  >     - info bï¼šæ˜¾ç¤ºæ‰€æœ‰æ–­ç‚¹
  >     - bï¼šæ‰“æ–­ç‚¹
  >     - deleteï¼šåˆ é™¤æ‰€æœ‰æ–­ç‚¹
  >   - å•æ­¥è°ƒè¯•
  >     - n/s
  >   - æ‰“å°ä¿¡æ¯
  >     - pï¼šæ ¹æ®å˜é‡ç±»åž‹æ‰“å°
  >     - x/[][][n] [f] [u]ï¼šå†…å­˜å†…å®¹
  >   - è°ƒç”¨å †æ ˆï¼šbt
  > - coreæ–‡ä»¶
  >   - å…è®¸coreæ–‡ä»¶ï¼šulmit -c unlimited
  >   - ç”Ÿæˆcoreæ–‡ä»¶
  >   - gdb core 

- makefile //å¤šçœ‹çœ‹

  > - å¢žé‡ç¼–è¯‘ï¼šæŒ‰ç…§ç”Ÿæˆæ—¶é—´ï¼Œå¢žé‡ç¼–è¯‘
  >   - æŒ‰ç…§ä¾èµ–æ–‡ä»¶ç”Ÿæˆçš„æ—¶é—´ï¼Œå¦‚æžœ
  > - ç›®æ ‡
  >   - æ™®é€šç›®æ ‡ï¼šç”Ÿæˆæ–‡ä»¶çš„ç›®æ ‡
  >   - ä¼ªç›®æ ‡ï¼šä¸ç”Ÿæˆæ–‡ä»¶çš„ç›®æ ‡
  > - ä¾èµ–
  > - å‘½ä»¤
  > - å˜é‡ï¼š
  >   - =å’Œ:=
  >   - é¢„å®šä¹‰å˜é‡
  >   - è‡ªåŠ¨å˜é‡ï¼š
  >     - $@
  >     - $^
  >     - $<
  > - æ¨¡å¼åŒ¹é…ï¼š%
  > - å‡½æ•°
  >   - wildcard
  >   - subst
  >   - patsubst
  > - å¾ªçŽ¯
  >   - for in set; do å‘½ä»¤; done

### Ep02 æ–‡ä»¶

- æ–‡ä»¶ç±»åž‹

  > - æ™®é€šæ–‡ä»¶ï¼šå­˜æ”¾åœ¨ç£ç›˜é‡Œçš„æ–‡ä»¶
  > - ç›®å½•æ–‡ä»¶ï¼šå­˜æ”¾åœ¨ç£ç›˜é‡Œçš„ï¼Œå…¶ä»–æ–‡ä»¶çš„ä¿¡æ¯
  > - é“¾æŽ¥ï¼šå¦ä¸€ä¸ªæ–‡ä»¶çš„è·¯å¾„ï¼Œå¤§å°å’Œå¦ä¸€ä¸ªæ–‡ä»¶æ–‡ä»¶åæœ‰å…³
  > - è®¾å¤‡æ–‡ä»¶
  >   - å­—ç¬¦è®¾å¤‡ï¼šé¼ æ ‡
  >   - å—è®¾å¤‡ï¼šç£ç›˜
  > - ç®¡é“ï¼šè¾“å…¥è¾“å‡ºæ–‡ä»¶
  > - sorketï¼šç½‘ç»œæ“ä½œæ–‡ä»¶

- æ–‡ä»¶æŒ‡é’ˆ

  > - FILE*
  > - ![image-20200413112017996](day27 ç¬”è®°.assets/image-20200413112017996.png)

- æ‰“å¼€å…³é—­æ–‡ä»¶ // ä¸‹åˆå¤çŽ°ä¸Šè¯¾ä»£ç 

  > - ```c
  >   FILE *fopen(const char*pathname,const char*mode);
  >   //pathname ä¸ºè·¯å¾„
  >   //mode ä¸ºæ‰“å¼€æ¨¡å¼
  >   ```
  >   
  >   - åˆ›å»ºç¼“å†²åŒºï¼ˆstreamï¼‰
  >   
  > - è¿½åŠ æ¨¡å¼ï¼šï¼Ÿ
  >
  > - å®šä¹‰å®ï¼š
  >
  >   ```c
  >   #define ARGS_CHECK(argc,val){if(argc!=val){printf("args Error!\n");return -1;}}
  >   //æ£€æŸ¥argcå‚æ•°ç”¨å®
  >   #define ERROR_CHECK(ret,val,info){if(ret==val){peinrf(info);return -1;}}
  >   //æ£€æŸ¥å‡½æ•°è¿”å›žå€¼ç”¨å®
  >   ```
  >
  > - ftallï¼šæ–‡ä»¶çš„è¯»å†™ä½ç½® 

- chmodï¼šä¿®æ”¹æ–‡ä»¶æƒé™

  > - æ•°å­—è®¾å®šæ³•
  >
  > - `chmod(æ–‡ä»¶åï¼Œ[å¯¹åº”çš„å…«è¿›åˆ¶æƒé™]);`
  >
  >   - å…«è¿›åˆ¶æ•°å­—ç ä¸­ï¼Œrä¸º4ï¼Œwä¸º2ï¼Œxä¸º2
  >
  >   - æ‰€ä»¥rwxä¸º7
  >
  >   - æ­¤å¤„è¾“å…¥8è¿›åˆ¶
  >
  >   - `chmod.c`
  >
  >     ```c
  >     int main(int argc,char argv[])
  >     {
  >         ARGC_CHECK(argc,3);
  >         //åœ¨å®šä¹‰8è¿›åˆ¶æ•°ä¹‹å‰è¦å…ˆåŠ 0
  >         //æ¯”å¦‚8è¿›åˆ¶çš„777 ä¸º0777
  >         // chmod 0777 filel
  >         int mode;
  >         sscanf(argv[1],"%o",&mode);
  >         //å°†å‘½ä»¤è¡Œå‚æ•°çš„å­—ç¬¦ä¸²è½¬æ¢æˆå…«è¿›åˆ¶æ•´æ•°
  >         int ret = chmod(argv[2],mode);
  >         //æ­¤å¤„ä¹Ÿå¯ä»¥ç›´æŽ¥å†™8è¿›åˆ¶çš„æ•°å­—
  >         ERROR_CHECK(ret,"-1","chmod Error!");
  >         //chmodé”™è¯¯è¿”å›ž-1ï¼Œæ­£ç¡®ä¸º0
  >     	return 0;
  >     }
  >     ```

- ä¼ å…¥å‚æ•°VSä¼ å…¥ä¼ å‡ºå‚æ•°

  > - const xxx xxxï¼šä¼ å…¥å‚æ•°
  >   - ä»…ä¼ å…¥å€¼ï¼Œä¸ä¿®æ”¹åŽŸå†…å®¹
  > - æ— constï¼Œåˆ™ä¸ºä¼ å…¥ä¼ å‡ºå‚æ•°
  >   - ä¼šä¿®æ”¹åŽŸæœ¬çš„å€¼

- getcwdï¼šç›¸å½“äºŽgwdå‘½ä»¤

  > - åŽŸåž‹ï¼šæ˜¾ç¤ºå½“å‰å·¥ä½œç›®å½•
  >
  >   - ```c
  >     #include<unistd.h>
  >     char *getcwd(char *buf,size_t size);
  >     char *getwd(char *buf);
  >     ```
  >
  > - æœ¬è´¨ðŸ‘‡ðŸ‘‡ðŸ‘‡ðŸ‘‡ðŸ‘‡ðŸ‘‡
  >
  >   - getcwd()å‡½æ•°ï¼šå°†å½“å‰å·¥ä½œç›®å½•çš„**ç»å¯¹è·¯å¾„**å¤åˆ¶åˆ°å‚æ•°bufæ‰€æŒ‡çš„ç³»ç»Ÿç©ºé—´ï¼Œå‚æ•°sizeä¸ºbufçš„ç©ºé—´å¤§å°ï¼Œåœ¨è°ƒç”¨æ­¤å‡½æ•°çš„æ—¶å€™ï¼Œéœ€è¦ä¿è¯bufçš„ç©ºé—´è¶³å¤Ÿå¤§ï¼Œè‹¥å·¥ä½œç›®å½•è¶…è¿‡sizeçš„å¤§å°åˆ™è¿”å›žNULLï¼Œerrorçš„å€¼ä¸ºERANGEã€‚å€˜è‹¥å‚æ•°bufä¸ºNULLï¼Œgetcwd()å‡½æ•°ä¼šä¾æ®sizeçš„å¤§å°è‡ªåŠ¨åˆ†é…å†…å­˜ï¼ˆä½¿ç”¨malloc()ï¼‰,å¦‚æžœå‚æ•°sizeä¹Ÿä¸º0ï¼Œåˆ™getcwd()ä¸€ä¾æ®å·¥ä½œç›®å½•ç»å¯¹è·¯å¾„çš„å­—ç¬¦ä¸²å¤§å°æ¥å†³å®šåˆ†é…å†…å­˜ï¼Œå¹¶ä¸”å¯ä»¥è‡ªåŠ¨ä½¿ç”¨free()é‡Šæ”¾ç©ºé—´ã€‚æ‰€ä»¥å¸¸ç”¨æ ¼å¼ä¸ºï¼š`getcwd(NULL,0)`ã€‚

- mkdirå‡½æ•°

  > - åˆ›å»ºçš„æ—¶å€™æƒé™ä¼šå—åˆ°æŽ©ç çš„å½±å“

### Ep03 ç›®å½•æµ

- DIRï¼šæ‰“å¼€ç›®å½•

- closeï¼šå…³é—­ç›®å½•

- readdirï¼šè¯»å–ç›®å½•ä¸­çš„æ¯ä¸€é¡¹

  > - ```c
  >   struct dirent *readdir(DIR *dorp);
  >   ```

- seekdirï¼šæ”¹å˜å½“å‰ç›®å½•æµçš„è¯»å†™ä½ç½®

  > - taildirï¼šèŽ·å–å½“å‰ç›®å½•æµçš„è¯»å†™ä½ç½®
  > - <img src="day27 ç¬”è®°.assets/image-20200413161743629.png" alt="image-20200413161743629"  />

- rewinddirï¼šç›´æŽ¥å›žåˆ°å¤´æŒ‡é’ˆ

  > - ```c
  >   #include<myLibrary.h>
  >   int main(int argc,char*argv[])
  >   {
  >       ARGS_CHECK(argc,2);
  >       DIR *dirl;
  >       dir = opendir(argv[]);
  >   }
  >   
  >   ```



### Ep04 èŽ·å–æ–‡ä»¶çŠ¶æ€

- statï¼šèŽ·å–æ–‡ä»¶ä¿¡æ¯å¸®æ”¾åœ¨*statbufä¸­

- ç¡¬é“¾æŽ¥å’Œè½¯é“¾æŽ¥çš„åŒºåˆ«

  > - è½¯é“¾æŽ¥

